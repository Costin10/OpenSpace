import{c as T}from"./index-BjdFrzXK.js";import{r as s}from"./vendor-codemirror-YmvNK9KJ.js";/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]],N=T("ellipsis",S),R={NO_ACTIVE_SUBSCRIPTION:"A Pro subscription is required to access this feature.",SUBSCRIPTION_REQUIRED:"A Pro subscription is required to access this feature.",PLAN_LIMIT_REACHED:"You've reached the limit for your current plan. Upgrade to continue.",TRIAL_EXPIRED:"Your trial has expired. Subscribe to continue using this feature.",UNAUTHORIZED:"Please sign in to continue.",INVALID_CREDENTIALS:"Invalid email or password. Please try again.",SESSION_EXPIRED:"Your session has expired. Please sign in again.",TOKEN_EXPIRED:"Your session has expired. Please sign in again.",NOT_FOUND:"The requested item could not be found.",ALREADY_EXISTS:"An item with this name already exists.",CONFLICT:"This action conflicts with existing data.",VALIDATION_ERROR:"Please check your input and try again.",INVALID_INPUT:"Please check your input and try again.",RATE_LIMITED:"Too many requests. Please wait a moment and try again.",TOO_MANY_REQUESTS:"Too many requests. Please wait a moment and try again.",INTERNAL_ERROR:"Something went wrong on our end. Please try again later.",SERVER_ERROR:"Something went wrong on our end. Please try again later.",SERVICE_UNAVAILABLE:"The service is temporarily unavailable. Please try again later.",NETWORK_ERROR:"Unable to connect. Please check your internet connection.",TIMEOUT:"The request timed out. Please try again.",CIRCUIT_OPEN:"The service is temporarily unavailable. Please try again in a moment."},w={400:"There was a problem with your request. Please check your input.",401:"Please sign in to continue.",403:"You don't have permission to perform this action.",404:"The requested item could not be found.",409:"This action conflicts with existing data.",422:"Please check your input and try again.",429:"Too many requests. Please wait a moment and try again.",500:"Something went wrong on our end. Please try again later.",502:"The service is temporarily unavailable. Please try again.",503:"The service is temporarily unavailable. Please try again.",504:"The request timed out. Please try again."},b=[{pattern:/Request failed with status code 403/i,message:"You don't have permission to perform this action."},{pattern:/Request failed with status code 401/i,message:"Please sign in to continue."},{pattern:/Request failed with status code 404/i,message:"The requested item could not be found."},{pattern:/Request failed with status code 500/i,message:"Something went wrong on our end. Please try again later."},{pattern:/Request failed with status code \d+/i,message:"Something went wrong. Please try again."},{pattern:/Network Error/i,message:"Unable to connect. Please check your internet connection."},{pattern:/timeout/i,message:"The request timed out. Please try again."},{pattern:/ECONNREFUSED/i,message:"Unable to connect to the server. Please try again later."},{pattern:/ENOTFOUND/i,message:"Unable to connect. Please check your internet connection."}],h=["NO_ACTIVE_SUBSCRIPTION","SUBSCRIPTION_REQUIRED","PLAN_LIMIT_REACHED","TRIAL_EXPIRED","BIZ_SUBSCRIPTION_REQUIRED","BIZ_PLAN_LIMIT_REACHED","BIZ_TRIAL_EXPIRED"];function k(e){if(!e)return!1;const u=typeof e.details?.code=="string"?e.details.code:void 0,o=typeof e.details?.error=="string"?e.details.error:void 0;return e.statusCode===403&&typeof e.code=="string"&&h.includes(e.code)||typeof e.code=="string"&&h.includes(e.code)||typeof u=="string"&&h.includes(u)||typeof o=="string"&&h.includes(o)||I(e.message)}function P(e,u){if(!e||k(e))return null;if(e.code&&R[e.code])return R[e.code];if(e.statusCode&&w[e.statusCode])return e.statusCode===403&&u?`You don't have permission to access ${u}.`:w[e.statusCode];if(e.message){for(const{pattern:o,message:f}of b)if(o.test(e.message))return f}return e.message&&!C(e.message)?e.message:u?`Unable to load ${u}. Please try again.`:"Something went wrong. Please try again."}function C(e){return[/status code \d+/i,/^Error:/i,/Exception/i,/ECONNREFUSED/i,/ENOTFOUND/i,/undefined/i,/null/i,/\[object/i,/stack trace/i,/at \w+\.\w+/i].some(o=>o.test(e))}function I(e){return e?/active subscription required|subscription required|no active subscription/i.test(e):!1}const a=typeof window<"u"?window.tauriAPI?.api:null;function O(e){const[o,f]=s.useState([]),[p,c]=s.useState(!0),[t,E]=s.useState(null),l=s.useCallback(async()=>{if(!a){c(!1);return}c(!0),E(null);try{const d=await a.project.getAll();if(d.success&&d.data)f(d.data);else{const n=P(d.error,"projects");E(n)}}catch{E("Unable to load projects. Please try again.")}finally{c(!1)}},[!0]),r=s.useCallback(async(d,n)=>{if(!a)return{success:!1};c(!0);try{const i=await a.project.create({name:d,description:n});return i.success&&await l(),i}finally{c(!1)}},[l]),y=s.useCallback(async(d,n)=>{if(!a)return{success:!1};c(!0);try{const i=await a.project.update(d,n);return i.success&&await l(),i}finally{c(!1)}},[l]),g=s.useCallback(async d=>{if(!a)return{success:!1};c(!0);try{const n=await a.project.delete(d);return n.success&&await l(),n}finally{c(!1)}},[l]);return s.useEffect(()=>{l()},[!0,l]),{projects:o,loading:p,error:t,refresh:l,createProject:r,updateProject:y,deleteProject:g}}function U(e,u){const o=u?.enabled??!0,[f,p]=s.useState([]),[c,t]=s.useState(!1),[E,l]=s.useState(null),r=s.useCallback(async()=>{if(!a||!e||!o){p([]),t(!1);return}t(!0),l(null);try{const n=await a.task.listByProject(e);if(n.success&&n.data)p(n.data);else{const i=P(n.error,"tasks");l(i)}}catch{l("Unable to load tasks. Please try again.")}finally{t(!1)}},[e,o]),y=s.useCallback(async(n,i)=>{if(!a||!e)return{success:!1};t(!0);try{const m=await a.task.create({projectId:e,instructions:n,status:i});return m.success&&await r(),m}finally{t(!1)}},[e,r]),g=s.useCallback(async(n,i)=>{if(!a)return{success:!1};t(!0);try{const m=await a.task.update(n,i);return m.success&&await r(),m}finally{t(!1)}},[r]),d=s.useCallback(async n=>{if(!a)return{success:!1};t(!0);try{const i=await a.task.delete(n);return i.success&&await r(),i}finally{t(!1)}},[r]);return s.useEffect(()=>{o&&e?r():(p([]),t(!1))},[o,e,r]),{tasks:f,loading:c,error:E,refresh:r,createTask:y,updateTask:g,deleteTask:d,setTasks:p}}function L(e,u){const o=u?.enabled??!0,[f,p]=s.useState([]),[c,t]=s.useState(!1),[E,l]=s.useState(null),r=s.useCallback(async()=>{if(!a||!e||!o){p([]),t(!1);return}t(!0),l(null);try{const n=await a.agent.listByProject(e);if(n.success&&n.data)p(n.data);else{const i=P(n.error,"agents");l(i)}}catch{l("Unable to load agents. Please try again.")}finally{t(!1)}},[e,o]),y=s.useCallback(async(n,i)=>{if(!a||!e)return{success:!1};t(!0);try{const m=await a.agent.create({projectId:e,name:n,systemPrompt:i});return m.success&&await r(),m}finally{t(!1)}},[e,r]),g=s.useCallback(async(n,i)=>{if(!a)return{success:!1};t(!0);try{const m=await a.agent.update(n,i);return m.success&&await r(),m}finally{t(!1)}},[r]),d=s.useCallback(async n=>{if(!a)return{success:!1};t(!0);try{const i=await a.agent.delete(n);return i.success&&await r(),i}finally{t(!1)}},[r]);return s.useEffect(()=>{o&&e?r():(p([]),t(!1))},[o,e,r]),{agents:f,loading:c,error:E,refresh:r,createAgent:y,updateAgent:g,deleteAgent:d,setAgents:p}}function D(){const[e,u]=s.useState([]),[o,f]=s.useState(!0),[p,c]=s.useState(null),t=s.useCallback(async()=>{if(a){f(!0),c(null);try{const y=await a.prompt.getAll();if(y.success&&y.data)u(y.data);else{const g=P(y.error,"prompts");c(g)}}catch{c("Unable to load prompts. Please try again.")}finally{f(!1)}}},[]),E=s.useCallback(async y=>{if(!a)return{success:!1};f(!0);try{const g=await a.prompt.create(y);return g.success&&await t(),g}finally{f(!1)}},[t]),l=s.useCallback(async(y,g)=>{if(!a)return{success:!1};f(!0);try{const d=await a.prompt.update(y,g);return d.success&&await t(),d}finally{f(!1)}},[t]),r=s.useCallback(async y=>{if(!a)return{success:!1};f(!0);try{const g=await a.prompt.delete(y);return g.success&&await t(),g}finally{f(!1)}},[t]);return s.useEffect(()=>{t()},[t]),{prompts:e,loading:o,error:p,refresh:t,createPrompt:E,updatePrompt:l,deletePrompt:r,setPrompts:u}}function q(){const[e,u]=s.useState([]),[o,f]=s.useState(!0),[p,c]=s.useState(null),t=s.useCallback(async()=>{if(a){f(!0),c(null);try{const E=await a.prompt.system.getAll();if(E.success&&E.data)u(E.data);else{const l=P(E.error,"system prompts");c(l)}}catch{c("Unable to load system prompts. Please try again.")}finally{f(!1)}}},[]);return s.useEffect(()=>{t()},[t]),{prompts:e,loading:o,error:p,refresh:t,setPrompts:u}}export{N as E,U as a,L as b,D as c,q as d,P as g,O as u};
