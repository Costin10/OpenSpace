import{r as c,j as e}from"./vendor-codemirror-YmvNK9KJ.js";import{c as U,X as H,a as r}from"./index-BjdFrzXK.js";import{c as V,d as W,E as X}from"./useApi-BCHzo7MO.js";import{F as D,P as L,b as J,a as K}from"./MainApp-CsQxt9Iy.js";import{C as T}from"./circle-alert-DGt2vr4w.js";import{R as M}from"./refresh-cw-Du5FK0wQ.js";import{U as Q}from"./user-lpBBC617.js";import{T as I}from"./trash-2-B4sySCZE.js";import"./vendor-markdown-Bqz58gXN.js";import"./vendor-react-bmmOCWbf.js";/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],R=U("globe",Y);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z=[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]],O=U("tag",Z),ee=[{value:"",label:"No category"},{value:"coding",label:"Coding"},{value:"writing",label:"Writing"},{value:"analysis",label:"Analysis"},{value:"creative",label:"Creative"},{value:"business",label:"Business"},{value:"other",label:"Other"}];function te({prompt:t,isOpen:n,onClose:u,onCreate:v,onUpdate:N}){const[d,x]=c.useState(""),[i,l]=c.useState(""),[w,C]=c.useState(""),[P,k]=c.useState(""),[o,p]=c.useState({}),[h,f]=c.useState(!1),g=!!t;c.useEffect(()=>{n&&(t?(x(t.title),l(t.content),C(t.description||""),k(t.category||"")):(x(""),l(""),C(""),k("")),p({}))},[n,t]);const j=()=>{const s={};return d.trim()?d.length>255&&(s.title="Title must be 255 characters or less"):s.title="Title is required",i.trim()||(s.content="Content is required"),p(s),Object.keys(s).length===0},m=async()=>{if(j()){f(!0);try{const s={title:d.trim(),content:i.trim(),description:w.trim()||void 0,category:P||void 0};let b;g&&t?b=await N(t.id,s):b=await v(s),b.success&&u()}finally{f(!1)}}};return n?e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[e.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:u}),e.jsxs("div",{className:"relative bg-surface border border-border rounded-xl w-full max-w-2xl mx-4 shadow-2xl max-h-[90vh] overflow-hidden flex flex-col",children:[e.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b border-border",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"flex items-center justify-center w-10 h-10 rounded-lg bg-gradient-to-br from-accent-purple/20 to-accent-pink/20 border border-accent-purple/30",children:e.jsx(D,{size:20,className:"text-accent-purple"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold text-text-primary",children:g?"Edit Prompt":"Create Prompt"}),e.jsx("p",{className:"text-xs text-text-muted",children:g?"Update your prompt details":"Create a reusable prompt template"})]})]}),e.jsx("button",{onClick:u,className:"p-2 rounded-lg text-text-muted hover:text-text-primary hover:bg-surface-hover transition-colors",children:e.jsx(H,{size:20})})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-6 space-y-5",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-text-primary mb-1.5",children:["Title ",e.jsx("span",{className:"text-accent-red",children:"*"})]}),e.jsx("input",{type:"text",value:d,onChange:s=>{x(s.target.value),o.title&&p({...o,title:void 0})},placeholder:"e.g., Code Review Assistant",className:r("w-full px-3 py-2 rounded-lg text-sm","bg-background border",o.title?"border-accent-red":"border-border focus:border-accent-blue","text-text-primary placeholder:text-text-muted","focus:outline-none focus:ring-1 focus:ring-accent-blue/50","transition-colors")}),o.title&&e.jsxs("p",{className:"mt-1.5 text-xs text-accent-red flex items-center gap-1",children:[e.jsx(T,{size:12}),o.title]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-primary mb-1.5",children:"Description"}),e.jsx("input",{type:"text",value:w,onChange:s=>C(s.target.value),placeholder:"Brief description of what this prompt does",className:r("w-full px-3 py-2 rounded-lg text-sm","bg-background border border-border focus:border-accent-blue","text-text-primary placeholder:text-text-muted","focus:outline-none focus:ring-1 focus:ring-accent-blue/50","transition-colors")})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-primary mb-1.5",children:"Category"}),e.jsx("select",{value:P,onChange:s=>k(s.target.value),className:r("w-full px-3 py-2 rounded-lg text-sm","bg-background border border-border focus:border-accent-blue","text-text-primary","focus:outline-none focus:ring-1 focus:ring-accent-blue/50","transition-colors"),children:ee.map(s=>e.jsx("option",{value:s.value,children:s.label},s.value))})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-text-primary mb-1.5",children:["Prompt Content ",e.jsx("span",{className:"text-accent-red",children:"*"})]}),e.jsx("textarea",{value:i,onChange:s=>{l(s.target.value),o.content&&p({...o,content:void 0})},placeholder:"Enter your prompt content here...",rows:10,className:r("w-full px-3 py-2 rounded-lg text-sm font-mono","bg-background border",o.content?"border-accent-red":"border-border focus:border-accent-blue","text-text-primary placeholder:text-text-muted","focus:outline-none focus:ring-1 focus:ring-accent-blue/50","transition-colors resize-none")}),o.content&&e.jsxs("p",{className:"mt-1.5 text-xs text-accent-red flex items-center gap-1",children:[e.jsx(T,{size:12}),o.content]}),e.jsxs("p",{className:"mt-1.5 text-xs text-text-muted",children:[i.length.toLocaleString()," characters"]})]})]}),e.jsxs("div",{className:"flex items-center justify-end gap-3 px-6 py-4 border-t border-border bg-surface/50",children:[e.jsx("button",{onClick:u,disabled:h,className:r("px-4 py-2 rounded-lg text-sm font-medium","text-text-secondary hover:text-text-primary","hover:bg-surface-hover transition-colors",h&&"opacity-50 cursor-not-allowed"),children:"Cancel"}),e.jsx("button",{onClick:m,disabled:h,className:r("px-4 py-2 rounded-lg text-sm font-medium","bg-accent-blue text-white","hover:bg-accent-blue/90 transition-colors",h&&"opacity-50 cursor-not-allowed"),children:h?"Saving...":g?"Save Changes":"Create Prompt"})]})]})]}):null}function se(t,n=150){return t.length<=n?t:t.slice(0,n).trim()+"..."}function S(t){return new Date(t).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})}function re({prompt:t,onClick:n,onEdit:u,onDelete:v,onDuplicate:N,isSystemPrompt:d=!1}){const[x,i]=c.useState(!1);return e.jsxs("div",{className:r("group relative bg-surface rounded-lg border border-border","hover:border-border-active hover:shadow-lg hover:shadow-accent-purple/5","transition-all duration-200 cursor-pointer"),onClick:n,children:[e.jsxs("div",{className:"flex items-start justify-between p-4 pb-2",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:r("flex items-center justify-center w-10 h-10 rounded-lg",d?"bg-gradient-to-br from-accent-cyan/20 to-accent-blue/20 border border-accent-cyan/30":"bg-gradient-to-br from-accent-purple/20 to-accent-pink/20 border border-accent-purple/30"),children:e.jsx(D,{size:20,className:d?"text-accent-cyan":"text-accent-purple"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"text-sm font-semibold text-text-primary truncate",children:t.title}),e.jsxs("div",{className:"flex items-center gap-2 mt-0.5",children:[t.category&&e.jsxs("span",{className:"inline-flex items-center gap-1 text-[10px] text-text-muted bg-surface-hover px-1.5 py-0.5 rounded",children:[e.jsx(O,{size:10}),t.category]}),e.jsx("span",{className:"text-[10px] text-text-muted",children:S(t.createdAt)})]})]})]}),!d&&e.jsxs("div",{className:"relative",children:[e.jsx("button",{onClick:l=>{l.stopPropagation(),i(!x)},className:r("p-1.5 rounded-md opacity-0 group-hover:opacity-100","text-text-muted hover:text-text-primary hover:bg-surface-hover","transition-all duration-150",x&&"opacity-100 bg-surface-hover"),children:e.jsx(X,{size:16})}),x&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 z-40",onClick:l=>{l.stopPropagation(),i(!1)}}),e.jsxs("div",{className:r("absolute right-0 top-full mt-1 z-50","bg-surface border border-border rounded-lg shadow-xl","py-1 min-w-[140px]","animate-in fade-in-0 zoom-in-95"),children:[e.jsxs("button",{onClick:l=>{l.stopPropagation(),i(!1),u?.()},className:"flex items-center gap-2 w-full px-3 py-2 text-sm text-text-secondary hover:text-text-primary hover:bg-surface-hover",children:[e.jsx(J,{size:14}),"Edit"]}),e.jsxs("button",{onClick:l=>{l.stopPropagation(),i(!1),N?.()},className:"flex items-center gap-2 w-full px-3 py-2 text-sm text-text-secondary hover:text-text-primary hover:bg-surface-hover",children:[e.jsx(K,{size:14}),"Duplicate"]}),e.jsx("div",{className:"h-px bg-border my-1"}),e.jsxs("button",{onClick:l=>{l.stopPropagation(),i(!1),v?.()},className:"flex items-center gap-2 w-full px-3 py-2 text-sm text-accent-red hover:bg-accent-red/10",children:[e.jsx(I,{size:14}),"Delete"]})]})]})]})]}),e.jsxs("div",{className:"px-4 pb-4",children:[t.description&&e.jsx("p",{className:"text-xs text-text-secondary mb-2 line-clamp-1",children:t.description}),e.jsx("div",{className:r("text-xs text-text-muted leading-relaxed","bg-background/50 rounded-md p-3","border border-border/50 font-mono"),children:e.jsx("p",{className:"line-clamp-3",children:se(t.content)})})]}),e.jsxs("div",{className:"px-4 pb-3 flex items-center justify-between text-[10px] text-text-muted",children:[e.jsxs("span",{children:["Updated ",S(t.updatedAt)]}),e.jsx("span",{className:"font-mono bg-surface-hover px-1.5 py-0.5 rounded",children:t.id.slice(0,8)})]})]})}function ae({onCreatePrompt:t,isSystemTab:n}){return e.jsxs("div",{className:"flex flex-col items-center justify-center h-full py-16",children:[e.jsx("div",{className:r("flex items-center justify-center w-20 h-20 rounded-2xl mb-6",n?"bg-gradient-to-br from-accent-cyan/10 to-accent-blue/10 border border-accent-cyan/20":"bg-gradient-to-br from-accent-purple/10 to-accent-pink/10 border border-accent-purple/20"),children:e.jsx(D,{size:40,className:n?"text-accent-cyan/60":"text-accent-purple/60"})}),e.jsx("h3",{className:"text-lg font-semibold text-text-primary mb-2",children:n?"No system prompts available":"No prompts yet"}),e.jsx("p",{className:"text-sm text-text-muted text-center max-w-md mb-6",children:n?"System prompts are shared templates created by administrators.":"Create your first prompt to save reusable templates for AI interactions."}),!n&&e.jsxs("button",{onClick:t,className:r("flex items-center gap-2 px-4 py-2.5 rounded-lg","bg-accent-purple text-white font-medium text-sm","hover:bg-accent-purple/90 transition-colors"),children:[e.jsx(L,{size:18}),"Create Prompt"]})]})}function be(){const[t,n]=c.useState("personal"),{prompts:u,loading:v,error:N,refresh:d,createPrompt:x,updatePrompt:i,deletePrompt:l}=V(),{prompts:w,loading:C,error:P,refresh:k}=W(),[o,p]=c.useState(null),[h,f]=c.useState(!1),[g,j]=c.useState(null),[m,s]=c.useState(null),b=t==="personal"?u:w,z=t==="personal"?v:C,E=t==="personal"?N:P,_=t==="personal"?d:k,q=async a=>{const y=await x(a);return y.success&&f(!1),y},F=async(a,y)=>{const A=await i(a,y);return A.success&&p(null),A},B=async a=>{const y=await l(a);return y.success&&j(null),y},G=async a=>{await x({title:`${a.title} (Copy)`,content:a.content,description:a.description||void 0,category:a.category||void 0})},$=a=>{t==="system"?s(a):p(a)};return e.jsxs("div",{className:"flex flex-col h-full bg-background",children:[e.jsxs("div",{className:"border-b border-border bg-surface/50",children:[e.jsxs("div",{className:"flex items-center justify-between px-4 py-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("h1",{className:"text-sm font-semibold text-text-primary",children:"Prompts"}),e.jsxs("span",{className:"text-[11px] text-text-muted bg-surface-hover px-2 py-0.5 rounded-full",children:[b.length," ",b.length===1?"prompt":"prompts"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>_(),className:r("p-2 rounded-md text-text-muted hover:text-text-primary","hover:bg-surface-hover transition-colors",z&&"animate-spin"),title:"Refresh prompts",children:e.jsx(M,{size:14})}),t==="personal"&&e.jsxs("button",{onClick:()=>f(!0),disabled:z,className:r("flex items-center gap-1.5 px-3 py-1.5 rounded-md text-xs font-medium","bg-accent-purple text-white","hover:bg-accent-purple/90 transition-colors",z&&"opacity-60 cursor-not-allowed"),children:[e.jsx(L,{size:14}),e.jsx("span",{children:"New Prompt"})]})]})]}),e.jsxs("div",{className:"flex items-end px-4 pb-0 gap-1",children:[e.jsxs("button",{onClick:()=>n("personal"),className:r("group flex items-center gap-2 px-4 py-2 text-xs font-medium whitespace-nowrap rounded-t-lg transition-all","border-x border-t",t==="personal"?"bg-background text-text-primary border-border -mb-px":"bg-transparent text-text-muted hover:text-text-secondary border-transparent hover:bg-surface-hover/50"),children:[e.jsx(Q,{size:14,className:r(t==="personal"?"text-accent-purple":"text-text-muted group-hover:text-text-secondary")}),e.jsx("span",{children:"My Prompts"}),t==="personal"&&e.jsx("span",{className:"text-[10px] text-text-muted bg-surface-hover px-1.5 py-0.5 rounded",children:u.length})]}),e.jsxs("button",{onClick:()=>n("system"),className:r("group flex items-center gap-2 px-4 py-2 text-xs font-medium whitespace-nowrap rounded-t-lg transition-all","border-x border-t",t==="system"?"bg-background text-text-primary border-border -mb-px":"bg-transparent text-text-muted hover:text-text-secondary border-transparent hover:bg-surface-hover/50"),children:[e.jsx(R,{size:14,className:r(t==="system"?"text-accent-cyan":"text-text-muted group-hover:text-text-secondary")}),e.jsx("span",{children:"System Prompts"}),t==="system"&&e.jsx("span",{className:"text-[10px] text-text-muted bg-surface-hover px-1.5 py-0.5 rounded",children:w.length})]})]})]}),e.jsxs("div",{className:"flex-1 overflow-auto scrollbar-thin p-4",children:[E&&e.jsx("div",{className:"mb-4 p-3 bg-accent-red/10 border border-accent-red/30 rounded-lg text-sm text-accent-red",children:E}),z&&b.length===0?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx(M,{size:24,className:"text-text-muted animate-spin"})}):b.length===0?e.jsx(ae,{onCreatePrompt:()=>f(!0),isSystemTab:t==="system"}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:b.map(a=>e.jsx(re,{prompt:a,onClick:()=>$(a),onEdit:()=>p(a),onDelete:()=>j(a.id),onDuplicate:()=>G(a),isSystemPrompt:t==="system"},a.id))})]}),(h||o)&&e.jsx(te,{prompt:o,isOpen:h||!!o,onClose:()=>{f(!1),p(null)},onCreate:q,onUpdate:F}),m&&e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[e.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:()=>s(null)}),e.jsxs("div",{className:"relative bg-surface border border-border rounded-xl w-full max-w-2xl mx-4 shadow-2xl max-h-[90vh] overflow-hidden flex flex-col",children:[e.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b border-border",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"flex items-center justify-center w-10 h-10 rounded-lg bg-gradient-to-br from-accent-cyan/20 to-accent-blue/20 border border-accent-cyan/30",children:e.jsx(R,{size:20,className:"text-accent-cyan"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold text-text-primary",children:m.title}),e.jsx("p",{className:"text-xs text-text-muted",children:"System Prompt (Read-only)"})]})]}),e.jsx("button",{onClick:()=>s(null),className:"p-2 rounded-lg text-text-muted hover:text-text-primary hover:bg-surface-hover transition-colors",children:e.jsx(I,{size:20,className:"rotate-45"})})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-6 space-y-4",children:[m.description&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-secondary mb-1",children:"Description"}),e.jsx("p",{className:"text-sm text-text-primary",children:m.description})]}),m.category&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-secondary mb-1",children:"Category"}),e.jsxs("span",{className:"inline-flex items-center gap-1 text-sm text-text-primary bg-surface-hover px-2 py-1 rounded",children:[e.jsx(O,{size:14}),m.category]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-secondary mb-1",children:"Prompt Content"}),e.jsx("div",{className:"bg-background border border-border rounded-lg p-4 font-mono text-sm text-text-primary whitespace-pre-wrap",children:m.content})]})]}),e.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-t border-border bg-surface/50",children:[e.jsxs("span",{className:"text-xs text-text-muted",children:["Created ",S(m.createdAt)]}),e.jsx("button",{onClick:()=>s(null),className:r("px-4 py-2 rounded-lg text-sm font-medium","bg-accent-cyan text-white","hover:bg-accent-cyan/90 transition-colors"),children:"Close"})]})]})]}),g&&e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[e.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:()=>j(null)}),e.jsxs("div",{className:"relative bg-surface border border-border rounded-xl p-6 max-w-sm w-full mx-4 shadow-2xl",children:[e.jsx("h3",{className:"text-lg font-semibold text-text-primary mb-2",children:"Delete Prompt"}),e.jsx("p",{className:"text-sm text-text-muted mb-6",children:"Are you sure you want to delete this prompt? This action cannot be undone."}),e.jsxs("div",{className:"flex justify-end gap-3",children:[e.jsx("button",{onClick:()=>j(null),className:r("px-4 py-2 rounded-lg text-sm font-medium","text-text-secondary hover:text-text-primary","hover:bg-surface-hover transition-colors"),children:"Cancel"}),e.jsx("button",{onClick:()=>B(g),className:r("px-4 py-2 rounded-lg text-sm font-medium","bg-accent-red text-white","hover:bg-accent-red/90 transition-colors"),children:"Delete"})]})]})]})]})}export{be as PromptsPage};
